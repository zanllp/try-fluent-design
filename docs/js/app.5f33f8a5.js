(function(e){function t(t){for(var r,i,a=t[0],u=t[1],l=t[2],f=0,d=[];f<a.length;f++)i=a[f],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&d.push(o[i][0]),o[i]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);s&&s(t);while(d.length)d.shift()();return c.push.apply(c,l||[]),n()}function n(){for(var e,t=0;t<c.length;t++){for(var n=c[t],r=!0,a=1;a<n.length;a++){var u=n[a];0!==o[u]&&(r=!1)}r&&(c.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},o={app:0},c=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],u=a.push.bind(a);a.push=t,a=a.slice();for(var l=0;l<a.length;l++)t(a[l]);var s=u;c.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"23d4":function(e,t,n){},"2d37":function(e,t,n){"use strict";n("8b00")},"44f8":function(e,t,n){},"8b00":function(e,t,n){},"994b":function(e,t,n){"use strict";n("44f8")},"9a70":function(e,t,n){"use strict";n("23d4")},"9cdc":function(e,t,n){"use strict";n("c701")},c701:function(e,t,n){},cd49:function(e,t,n){"use strict";n.r(t);n("4160"),n("b0c0"),n("159b"),n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("830f"),o=n("5c40"),c=n("9ff4"),i=Object(o["i"])("span",null,"暗黑模式",-1),a=Object(o["i"])("p",null," For an app to feel natural, it should adapt its layout to different screen sizes and devices. You can use automatic sizing, layout panels, visual states, and even separate UI definitions in XAML to create a responsive UI. ",-1),u=Object(o["h"])("1"),l=Object(o["h"])("hello world");function s(e,t){var n=Object(o["x"])("window"),s=Object(o["x"])("block"),f=Object(o["x"])("block-container");return Object(o["r"])(),Object(o["e"])("div",{class:"window-container",ref:"selfRef",id:"bg",onMousemove:t[2]||(t[2]=function(){return e.onMouseMove.apply(e,arguments)})},[(Object(o["r"])(!0),Object(o["e"])(o["b"],null,Object(o["v"])(e.windows,(function(u){return Object(o["r"])(),Object(o["e"])(n,{key:u.i,"init-pos":u},{default:Object(o["E"])((function(){return[i,Object(o["F"])(Object(o["i"])("input",{type:"checkbox","onUpdate:modelValue":t[1]||(t[1]=function(t){return e.darkMode=t})},null,512),[[r["b"],e.darkMode]]),Object(o["i"])("h1",null,"Create a responsive layout-"+Object(c["F"])(u.i+1),1),a]})),_:2},1032,["init-pos"])})),128)),Object(o["i"])(n,{"init-pos":{top:512,left:480}},{default:Object(o["E"])((function(){return[Object(o["i"])(f,null,{default:Object(o["E"])((function(){return[(Object(o["r"])(!0),Object(o["e"])(o["b"],null,Object(o["v"])(e.blocks,(function(e){return Object(o["r"])(),Object(o["e"])(s,{key:e,value:e,style:{padding:"4px"}},{default:Object(o["E"])((function(){return[Object(o["h"])(Object(c["F"])(e),1)]})),_:2},1032,["value"])})),128)),(Object(o["r"])(!0),Object(o["e"])(o["b"],null,Object(o["v"])(e.blocks,(function(e){return Object(o["r"])(),Object(o["e"])(s,{key:e,value:e,style:{margin:"4px"}},{default:Object(o["E"])((function(){return[Object(o["h"])(Object(c["F"])(e),1)]})),_:2},1032,["value"])})),128)),Object(o["i"])(s,null,{default:Object(o["E"])((function(){return[u]})),_:1}),Object(o["i"])(s,{style:{cursor:"pointer"}},{default:Object(o["E"])((function(){return[l]})),_:1})]})),_:1})]})),_:1})],544)}n("cb29"),n("d81d");var f=n("a1e9"),d=(n("4ec9"),n("d3b7"),n("3ca3"),n("ddb0"),new Map),b=function(e,t){var n=d.get(e);n?n.push(t):d.set(e,[t])},v=function(e){return d.get(e)||[]},p=Object(f["h"])({darkMode:!0,idPool:{window:[],"block-container":[]}}),O=Object(o["j"])({name:"App",setup:function(){var e=Object(f["i"])(null),t=function(e){v("mousemove").forEach((function(t){return t(e)}))},n=Object(f["h"])(Array(3).fill(null).map((function(e,t){return{top:256+72*t,left:256+72*t,i:t}}))),r=Object(f["h"])(Array(26).fill(null).map((function(e,t){return String.fromCharCode(65+t)})));return{window:window,selfRef:e,onMouseMove:t,darkMode:Object(f["n"])(p,"darkMode"),windows:n,blocks:r}}});n("9cdc");O.render=s;var j=O,h=Object(o["G"])("data-v-ec9115f8");Object(o["u"])("data-v-ec9115f8");var w={class:"blur-layer"},g=Object(o["i"])("div",{class:"noise-layer"},null,-1);Object(o["s"])();var y=h((function(e,t){return Object(o["r"])(),Object(o["e"])("div",{class:"container-wrap",style:e.style,onMousedown:t[1]||(t[1]=Object(r["c"])((function(){return e.control.apply(e,arguments)}),["left"])),onMouseup:t[2]||(t[2]=Object(r["c"])((function(){return e.release.apply(e,arguments)}),["left"])),onMouseleave:t[3]||(t[3]=function(){return e.release.apply(e,arguments)})},[Object(o["i"])("div",w,[Object(o["i"])("div",{class:"color-layer",style:e.colorLayerStyle},[g],4)]),Object(o["i"])("div",{class:"content",style:"color:".concat(e.darkMode?"white":"black")},[Object(o["w"])(e.$slots,"default")],4)],36)})),m=function(e){var t=e>>16,n=e>>8&255,r=255&e;return[t,n,r]},k=function(e){var t=p.idPool[e],n=0!==t.length?t[t.length-1]+1:0;return t.push(n),n},x=(n("99af"),n("a630"),n("6062"),{start:"move",resize:"nwse-resize"}),S=function(e){return Object(f["h"])({offset:{top:0,left:0},size:{width:512,height:256},zIndex:0,backgroundPos:{top:0,left:0},flagSet:new Set,initPos:e})},z=function(e){var t=e,n=Object(o["d"])((function(){var e={top:-t.offset.top-t.initPos.top-2+16,left:-t.offset.left-t.initPos.left-2+16};return"\n          background-position:".concat(e.left,"px ").concat(e.top,"px;\n          transform:translate(").concat(t.offset.left,"px,").concat(t.offset.top,"px);\n          cursor:").concat(x[Array.from(t.flagSet.keys())[0]],";\n          width:").concat(t.size.width,"px;\n          height:").concat(t.size.height,"px;\n          top:").concat(t.initPos.top,"px;\n          left:").concat(t.initPos.left,"px;\n          z-index:").concat(t.zIndex)}));return{style:n}},M=1,P=function(e){var t=function(t){e.flagSet.add("start"),console.info(M),e.zIndex<M&&(e.zIndex=M+1,M=e.zIndex)},n=new Array,r=e,o=function(t){var n=t.type;switch(n){case"mouseleave":!e.flagSet.has("resize")&&e.flagSet.clear();break;case"mouseup":e.flagSet.clear();break}},c=function(e){r.flagSet.has("start")&&(r.flagSet.has("resize")?(r.size.width+=e.movementX,r.size.height+=e.movementY):(r.offset.left+=e.movementX,r.offset.top+=e.movementY));var t=r.offset.left+r.initPos.left+r.size.width,o=r.offset.top+r.initPos.top+r.size.height,c=16;if(t-e.pageX>0&&t-e.pageX<c&&o-e.pageY>0&&o-e.pageY<c)r.flagSet.has("resize")||n.push(Array.from(r.flagSet)),r.flagSet.add("resize");else if(r.flagSet.has("resize")){var i=n.pop();i&&(r.flagSet.clear(),i.forEach((function(e){return r.flagSet.add(e)})))}};return{release:o,control:t,move:c}},_=Object(o["j"])({name:"window",props:{initPos:{type:Object,default:function(){return{top:256,left:256}}}},setup:function(e){var t=e,n=t.initPos,r=S(n),c=z(r),i=c.style,a=P(r),u=a.move,l=a.control,s=a.release;Object(o["o"])((function(){b("mousemove",u)})),Object(o["t"])("window-size",r.size),Object(o["t"])("window-offset",r.offset);var d=Object(o["d"])((function(){return"background: rgba(".concat(m(p.darkMode?0:16777215),", 0.4)")}));return{style:i,colorLayerStyle:d,release:s,control:l,darkMode:Object(f["n"])(p,"darkMode")}}});n("9a70");_.render=y,_.__scopeId="data-v-ec9115f8";var C=_,R=Object(o["G"])("data-v-68e90022");Object(o["u"])("data-v-68e90022");var E={class:"block",ref:"domRef"};Object(o["s"])();var I=R((function(e,t){return Object(o["r"])(),Object(o["e"])("div",E,[Object(o["w"])(e.$slots,"default")],512)})),A=Object(o["j"])({name:"block",props:{value:{type:String}},setup:function(e){var t,n=Object(f["i"])(),r=Object(f["i"])(null),c=Object(f["i"])(),i=Object(o["n"])("unmounted-block"),a=Object(o["n"])("regist-any-block"),u=Object(o["n"])("update-block-state"),l=Object(o["n"])("on-will-update-rect");return Object(o["o"])((function(){var o=n.value;if(!o)throw new Error("任意形状块获取dom失败!!!");if(!(a&&u&&l))throw new Error("block组件必须在block-container组件的包裹下");t=new ResizeObserver((function(t){r.value=t[0].target.getBoundingClientRect(),u({value:e.value,rect:r.value,id:c.value||-1})})),t.observe(o),c.value=a({value:e.value,rect:r.value,id:-1}),l((function(){r.value=o.getBoundingClientRect(),u({value:e.value,rect:r.value,id:c.value})}),c.value)})),Object(o["p"])((function(){var e=n.value;e&&t&&t.disconnect(),i&&i(c.value)})),{domRef:n}}});n("2d37");A.render=I,A.__scopeId="data-v-68e90022";var B=A,G=Object(o["G"])("data-v-2c5f534f");Object(o["u"])("data-v-2c5f534f");var F=Object(o["i"])("stop",{offset:"0%","stop-color":"white"},null,-1),X=Object(o["i"])("stop",{offset:"100%","stop-color":"transparent"},null,-1);Object(o["s"])();var Y=G((function(e,t){return Object(o["r"])(),Object(o["e"])("div",{class:"block-container",onMousemove:t[1]||(t[1]=function(){return e.control.apply(e,arguments)}),onMouseleave:t[2]||(t[2]=function(){return e.release.apply(e,arguments)})},[Object(o["w"])(e.$slots,"default"),(Object(o["r"])(),Object(o["e"])("svg",{class:"svg-mask",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 ".concat(e.windowSize.width-32," ").concat(e.windowSize.height-32),ref:"svgRef"},[Object(o["i"])("defs",null,[Object(o["i"])("radialGradient",{id:"Gradient-".concat(e.id),cx:e.svgCursorPercent.x,cy:e.svgCursorPercent.y,r:"0.2"},[F,X],8,["id","cx","cy"]),Object(o["i"])("mask",{id:"Mask-".concat(e.id)},[(Object(o["r"])(!0),Object(o["e"])(o["b"],null,Object(o["v"])(e.layout,(function(e){return Object(o["r"])(),Object(o["e"])("rect",{x:e.x,y:e.y,width:e.width,height:e.height,key:e.i,fill:"black",stroke:"white","stroke-width":"2"},null,8,["x","y","width","height"])})),256))],8,["id"])]),Object(o["i"])("rect",{x:"0",y:"0",width:e.maxSide,height:e.maxSide,fill:e.isStart?"url('#Gradient-".concat(e.id,"')"):"transparent",mask:e.isStart?"url('#Mask-".concat(e.id,"')"):void 0},null,8,["width","height","fill","mask"])],8,["viewBox"]))],32)})),L=(n("4de4"),n("c740"),n("a434"),n("2ef0")),U=function(e,t){var n=Object(f["i"])(),r=Object(f["i"])(),c={ro:new ResizeObserver((function(e){r.value=n.value.getBoundingClientRect()})),mounted:function(){var e=n.value;if(!e)throw new Error("获取svg dom失败!!!");r.value=e.getBoundingClientRect(),c.ro.observe(e),console.log(e)},unmounted:function(){c.ro.disconnect()}},i=Object(f["i"])({x:0,y:0}),a=Object(o["d"])((function(){return Math.max(e.value.height-32,e.value.width-32)})),u=Object(f["h"])(new Set),l=function(){u.add("start")},s=function(){u.delete("start")},d=function(e){var t=n.value;if(u.has("start")&&t){var r=t.getBoundingClientRect(),o=e.x-r.x,c=e.y-r.y;i.value={x:o/a.value,y:c/a.value}}},b=Object(f["h"])(new Array),v=Object(o["d"])((function(){var e=n.value,t=e?e.getBoundingClientRect():{x:0,y:0},r=b.filter((function(e){return e.rect})).map((function(e){return{width:e.rect.width,height:e.rect.height,i:e.id,x:e.rect.x-t.x,y:e.rect.y-t.y}}));return r})),p=Object(o["d"])((function(){return u.has("start")}));return{layout:v,svgCursorPercent:i,svgRef:n,control:l,release:s,cursorMove:d,blocks:b,isStart:p,maxSide:a,svgObserver:c}},$=function(e){var t=Object(f["i"])(0),n=new Array;return Object(o["t"])("regist-any-block",(function(n){return n.id=++t.value,e.push(n),n.id})),Object(o["t"])("update-block-state",(function(t){var n=e.findIndex((function(e){return e.id===t.id}));-1!==n&&(e[n]=t)})),Object(o["t"])("on-will-update-rect",(function(e,t){n.push({cb:e,id:t})})),Object(o["t"])("unmounted-block",(function(t){n.splice(n.findIndex((function(e){return e.id===t})),1),e.splice(e.findIndex((function(e){return e.id===t})),1)})),{updateQuene:n}},J=Object(o["j"])({name:"blockContainer",setup:function(){var e=k("block-container"),t={width:200,height:200},n={top:0,left:0},r=Object(f["i"])(t),c=Object(f["i"])(n),i=U(r,c),a=i.layout,u=i.svgCursorPercent,l=i.svgRef,s=i.cursorMove,d=i.control,v=i.release,p=i.blocks,O=i.isStart,j=i.maxSide,h=i.svgObserver,w=$(p),g=w.updateQuene;return Object(o["o"])((function(){r.value=Object(o["n"])("window-size",t),c.value=Object(o["n"])("window-offset",n),h.mounted(),r.value&&Object(o["C"])((function(){return r.value}),Object(L["debounce"])((function(){return g.forEach((function(e){return e.cb()}))}),300),{deep:!0,immediate:!0}),b("mousemove",s)})),Object(o["o"])((function(){h.unmounted()})),{layout:a,svgCursorPercent:u,svgRef:l,control:d,release:v,windowSize:r,isStart:O,maxSide:j,id:e}}});n("994b");J.render=Y,J.__scopeId="data-v-2c5f534f";var Q=J,T=Object(r["a"])(j),V=[C,B,Q];V.forEach((function(e){T.component(e.name,e)})),T.mount("#app")}});
//# sourceMappingURL=app.5f33f8a5.js.map